{"id":"contrail-06d","title":"ADE: import history button","description":"Add a one-click 'Import history now' button in the analysis ADE UI, backed by a POST /api/import_history endpoint that backfills Codex/Claude into the master log with dedupe + redaction.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T11:08:53.178602-08:00","updated_at":"2025-12-18T11:09:14.008216-08:00","closed_at":"2025-12-18T11:09:14.008216-08:00","close_reason":"Implemented endpoint + UI button; merged via PR #3"}
{"id":"contrail-0n4","title":"fix: dashboard stuck on loading","description":"Dashboard UI fails to load (Sessions stays 'Loading…') due to a JS syntax error in an invalid regex literal introduced in the project drilldown patch.","acceptance_criteria":"Dashboard loads sessions list successfully; no JS parse errors.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T16:55:38.344514-08:00","updated_at":"2025-12-18T16:59:45.182914-08:00","closed_at":"2025-12-18T16:59:45.182914-08:00","close_reason":"Fixed dashboard JS parse error; merged via PR #10","external_ref":"gh-?","comments":[{"id":2,"issue_id":"contrail-0n4","author":"rohit","text":"Root cause: JS regex literals in  were double-escaped; one regex became syntactically invalid and prevented the entire script from running.\n\nFix: corrected regex + string escapes so the inline script parses and project inference works.\n\nVerification:  on extracted inline script passes; \nrunning 1 test\ntest memory_blocks::tests::round_trip_blocks ... ok\n\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 8 tests\ntest cursor::tests::fingerprint_is_stable ... ok\ntest cursor::tests::extracts_metadata_fields ... ok\ntest claude::tests::parses_basic_claude_line ... ok\ntest types::tests::accepts_valid_schema ... ok\ntest types::tests::rejects_missing_content ... ok\ntest types::tests::rejects_invalid_uuid ... ok\ntest codex::tests::parses_basic_codex_line ... ok\ntest cursor::tests::parses_messages_from_state_db ... ok\n\ntest result: ok. 8 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s and  will be re-run before merge.","created_at":"2025-12-19T00:56:01Z"},{"id":3,"issue_id":"contrail-0n4","author":"rohit","text":"Fix applied in dashboard/src/index.html: corrected regex literals + newline/whitespace handling so the inline script parses and project inference works. Verified with node --check on extracted script; will run cargo test/clippy before merging.","created_at":"2025-12-19T00:57:01Z"}]}
{"id":"contrail-0ol","title":"fix: codex imported timestamps + session ontology","description":"Imported Codex history often lacks per-line timestamps (only a session header has one), so importer assigns import-time timestamps; dashboard then shows confusing identical times and a bogus header event. Improve Codex history import timestamp inference and adjust dashboard rendering to hide Codex session header + avoid misleading timestamps.","acceptance_criteria":"Codex history import infers per-line timestamps from session header; dashboard hides header row and avoids showing import-time timestamps as event times; analysis UI reachable at 3210 with instructions; cargo fmt/test/clippy pass.","notes":"Shipped: importer infers Codex per-line timestamps from session header (marks timestamp_inferred + session_started_at) and dashboard hides Codex header row + suppresses misleading import-time timestamps; analysis UI available at 127.0.0.1:3210.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T13:04:38.713557-08:00","updated_at":"2025-12-18T13:16:56.686514-08:00","closed_at":"2025-12-18T13:16:56.686516-08:00"}
{"id":"contrail-5f0","title":"Initialize private contrail repo with gitignore and push","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-24T23:12:22.198188-08:00","updated_at":"2025-11-24T23:13:54.320651-08:00","closed_at":"2025-11-24T23:13:54.320655-08:00"}
{"id":"contrail-6fl","title":"fix: dashboard show latest messages in tail","description":"In Tail (fast) mode the dashboard only fetches the last N log lines globally, so a busy codex-cli session can show only tool/trace events and miss the actual user/assistant messages.","acceptance_criteria":"Selecting a session in Tail mode loads more events for that session so Conversation view reliably shows recent user/assistant messages.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T17:24:13.887128-08:00","updated_at":"2025-12-18T17:27:19.881628-08:00","closed_at":"2025-12-18T17:27:19.881628-08:00","close_reason":"Merged dashboard tail message fix via PR #12","comments":[{"id":4,"issue_id":"contrail-6fl","author":"rohit","text":"Fix: in Tail mode, selecting a session now triggers a per-session fetch (last ~2000 events, bounded to 5000) via /api/logs?tool=...\u0026session_id=...\u0026limit=... and caches the result. Conversation view filters to just user/assistant message events so you see the actual back-and-forth even when the session is very trace-heavy.\n\nVerification: node --check on extracted inline script; dashboard restarted and serves updated HTML.","created_at":"2025-12-19T01:25:02Z"}]}
{"id":"contrail-btc","title":"fix: show other projects in tail","description":"Dashboard 'All Projects' dropdown is built from sessions in the currently loaded Tail window (last N events). A very chatty codex-cli session can dominate the tail, so only one project appears even when other sessions/projects exist.","acceptance_criteria":"In Tail (fast), project/session lists still include other recent sessions/projects (not just the loudest session).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T17:36:43.889151-08:00","updated_at":"2025-12-18T18:02:07.82107-08:00","closed_at":"2025-12-18T18:02:07.82107-08:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"contrail-btc","author":"rohit","text":"Shipped: Tail mode now does periodic wider discovery (limit=5000) so All Projects doesn’t collapse to a single active session; also improved Codex message rendering (user_message/agent_message) + role inference.","created_at":"2025-12-19T02:01:56Z"}]}
{"id":"contrail-ct5","title":"feat: improve dashboard timestamps + readability","description":"Dashboard currently renders timestamps only to seconds and shows raw JSON blocks, making Codex tool-call bursts look like identical times and hard to skim. Improve timestamp formatting (include fractional seconds and/or index), add basic structured rendering for function_call/function_call_output, and fix /api/logs query parsing + tail performance.","acceptance_criteria":"Dashboard shows distinct timestamps (or ordering index) for rapid assistant events; tool calls/outputs are collapsed/pretty-rendered; /api/logs respects query params and tail mode no longer scans entire log file on each poll; cargo fmt/test/clippy pass.","notes":"Dashboard: timestamps now include fractional seconds (when present) and an in-session index; tool-call/tool-output JSON is collapsed/pretty-rendered; /api/logs now respects query params and tail mode reads from end of file instead of scanning full JSONL each poll. Verified with cargo fmt/test/clippy.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T12:16:41.557468-08:00","updated_at":"2025-12-18T12:27:55.752902-08:00","closed_at":"2025-12-18T12:27:55.752904-08:00"}
{"id":"contrail-d14","title":"Analysis ADE: memory blocks + context pack","description":"Implement a local-first ADE slice in the analysis service: (1) editable memory blocks stored on disk, (2) /api/context_pack endpoint to generate a redacted, size-bounded prompt/context bundle from top sessions + memories + blocks, (3) minimal HTML UI to view/probe/export.\\n\\nDone:\\n- Added memory blocks storage + CRUD API (default path ~/.contrail/analysis/memory_blocks.json; env override CONTRAIL_MEMORY_BLOCKS_PATH).\\n- Added /api/context_pack (json or format=text) to build a redacted context bundle (env CONTRAIL_CONTEXT_PACK_MAX_CHARS).\\n- Added local ADE UI served at / (analysis service).\\n- Improved API error status codes (400/404/500).\\nTests: cargo fmt; cargo test (pass).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T10:13:25.409118-08:00","updated_at":"2025-12-18T10:23:35.629726-08:00","closed_at":"2025-12-18T10:23:35.629726-08:00","close_reason":"Merged local ADE slice into analysis service"}
{"id":"contrail-dnx","title":"chore: fix clippy warnings","description":"Make the workspace pass `cargo clippy --workspace --all-targets -- -D warnings` (currently failing in decoder + tools/exporter).","acceptance_criteria":"`cargo clippy --workspace --all-targets -- -D warnings` passes; `cargo test --workspace` still passes.","notes":"Fixed clippy warnings across decoder/exporter/dashboard/analysis; verified with cargo fmt, cargo test --workspace, cargo clippy --workspace --all-targets -- -D warnings.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T11:15:33.12559-08:00","updated_at":"2025-12-18T11:19:04.973783-08:00","closed_at":"2025-12-18T11:19:04.973784-08:00"}
{"id":"contrail-dwf","title":"Token usage dashboard for last month (Codex + Cursor)","description":"Sync git with origin; collect last-30-days token usage across Codex CLI and Cursor; present totals + breakdown.","notes":"Backfilled history via importer; generated export/wrapup_2026.html + export/wrapup_2026.json. Jan 2026 totals: 46,530,337,610 tokens (codex-cli). Cursor has events but no usage/token fields in local DB/logs, so token totals remain 0.","status":"closed","priority":1,"issue_type":"chore","owner":"rohit.krishnan@gmail.com","created_at":"2026-01-29T20:54:28.487462-08:00","created_by":"Rohit","updated_at":"2026-01-29T21:31:19.412988-08:00","closed_at":"2026-01-29T21:31:19.412988-08:00","close_reason":"Generated Jan 2026 HTML/JSON wrapup; Cursor token counts not available from local storage."}
{"id":"contrail-e2f","title":"ADE: sessions browser + one-click history import","description":"Make the analysis ADE straightforward: (1) browse sessions (incl. historical codex-cli) with per-session event view, (2) one-click history import (codex+claude) into ~/.contrail/logs/master_log.jsonl with dedupe, (3) minimal UI wiring + README notes.\\n\\nDone:\\n- core_daemon now auto-backfills historical Codex/Claude logs once on startup via scrapers::history_import, then continues live capture; marker: ~/.contrail/state/history_import_done.json.\\n- analysis: added sessions API filtering (sort/tool/limit/offset) and /api/session_events to fetch full conversation per session.\\n- analysis ADE UI: added Sessions browser + conversation viewer + refresh wiring.\\n- README updated for new flow and endpoints.\\nTests: cargo fmt; cargo test (pass).","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-18T10:30:22.137501-08:00","updated_at":"2025-12-18T10:44:14.380191-08:00","closed_at":"2025-12-18T10:44:14.380191-08:00","close_reason":"Implemented sessions browser + automatic history backfill"}
{"id":"contrail-goz","title":"feat: drilldown by tool and project","description":"Add a simple drill-down view over captured sessions: tool → project_context → sessions → conversation. This should work for live logs (already have project_context) and as much as possible for imported Codex history (infer project context when available).","acceptance_criteria":"Analysis UI can filter sessions by tool and project; /api/projects lists projects (counts) with optional tool/day filters; sessions list updates accordingly; cargo fmt/test/clippy pass.","notes":"Requested by user: drill-down over imported+live history by tool and project; keep UX simple and local-first.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T14:58:28.379402-08:00","updated_at":"2025-12-18T15:29:07.752085-08:00","closed_at":"2025-12-18T15:29:07.752085-08:00","close_reason":"Implemented tool→project drilldown (analysis + dashboard)","comments":[{"id":1,"issue_id":"contrail-goz","author":"rohit","text":"Implemented drilldown tool→project→sessions.\n\n- analysis: added /api/projects; added project filter to /api/sessions; ADE now has Project dropdown; codex-cli sessions infer project_context from cwd / tool output / path hints (so imported Codex can group by repo).\n- dashboard: added Project filter + grouped Sessions list; codex imported sessions infer project from environment_context/output paths; added Conversation vs Full Trace toggle; hide misleading per-message timestamps for imported codex.\n\nTests: cargo fmt --all; cargo test --workspace; cargo clippy --workspace --all-targets -- -D warnings.","created_at":"2025-12-18T23:28:56Z"}]}
{"id":"contrail-nuj","title":"Repo reconnaissance for Q\u0026A","description":"Scan workspace structure, crates, entrypoints, and key module interfaces so I can answer follow-up questions accurately.\\n\\nFindings: Rust workspace w/ core_daemon + scrapers (capture), importer (backfill), dashboard (tail+UI), analysis (API+LLM autoprobe), tools/exporter (curate export), decoder (antigravity pb experiments).\\nTests: cargo test (pass).","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T09:59:53.057384-08:00","updated_at":"2025-12-18T10:05:07.586344-08:00","closed_at":"2025-12-18T10:05:07.586344-08:00","close_reason":"Recon complete; ready for Q\u0026A"}
